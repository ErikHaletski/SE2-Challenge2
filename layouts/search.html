{{ define "main" }}

<main>
	<form action="/search" method="GET">
		<input type="search" name="q" id="search-query" placeholder="Search....">
		<button type="submit">Search</button>
	</form>
    <div id="search-results"></div>
    <div class="search-loading">Loading...</div>

    <script id="search-result-template" type="text/x-js-template">
    <div id="summary-${key}">
        <h3><a href="${link}">${title}</a></h3>
        <p>${snippet}</p>
        <p>
            <small>
                ${ isset tags }Tags: ${tags}<br>${ end }
            </small>
        </p>
    </div>
    </script>
	<script src="https://unpkg.com/fuse.js@7.1.0/dist/fuse.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.js" integrity="sha512-+k1pnlgt4F1H8L7t3z95o3/KO+o78INEcXTbnoJQ/F2VqDVhWoaiVml/OEHv9HsVgxUaVW+IbiZPUJQfF/YxZw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.js" integrity="sha512-19TrqSGVSwaC2IDGHrD+tAkX59/w5cXy0BHDVwn7OJQXxavORhFSFM7DOO9soXKuo8O7gGNHiG9R2vFrXRBcTQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script>
		const pages = new Map();
		{{ with .Site.GetPage "/blog" }}
			{{ range .Pages }}
				pages.set("{{ .RelPermalink }}", "{{ .Title }}".toLowerCase());
			{{ end }}
		{{ end }}
	</script>
	{{ with resources.Get "js/search.js" }}
		<script src="{{ .RelPermalink }}"></script>
	{{ end }}

</main>

{{ end }}
